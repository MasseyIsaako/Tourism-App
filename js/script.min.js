function initialiseIntro(){new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationType:"progress",direction:"vertical"})}function initialiseMap(){var e={center:{lat:-41.2165668,lng:172.6385759},zoom:5,disableDefaultUI:!0,scrollwheel:!0,draggable:!0,fullScreenControl:!0,keybosrdShortcuts:!1,mapTypeControlOptions:{position:google.maps.ControlPosition.TOP_CENTER}};map=new google.maps.Map(document.getElementById("map"),e),findMe(),runMap(),injectAttractions(),google.maps.event.addListener(map,"click",function(e){addMarker(e.latLng,map)})}function runMap(){google.maps.event.addDomListener(window,"load",initialiseMap)}function injectAttractions(){$.ajax({url:"js/attractions.json",dataType:"json",success:function(e){for(var t=0;t<e.length;t++)popup(new google.maps.Marker({position:{lat:e[t].lat,lng:e[t].lng},map:map,animation:google.maps.Animation.DROP,title:e[t].title,description:e[t].description,icon:"images/binoculars-icon.png"}))},error:function(){console.log("Something went wrong!")}})}function popup(e){popupBox&&popupBox.close(),popupBox=new google.maps.InfoWindow,google.maps.event.addListener(e,"click",function(){popupBox.setContent("<div id='title'><p><strong>"+e.title+"</strong></p></div><div id='description'><i>"+e.description+"</i></div>"),popupBox.open(map,e)})}function findMe(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){locateOrigin=new google.maps.Marker({position:{lat:e.coords.latitude,lng:e.coords.longitude},map:map}),map.panTo(locateOrigin.position)})}function addMarker(e,t){userMarker&&userMarker.setMap(null),showDirection((userMarker=new google.maps.Marker({position:e,map:t})).position)}function showDirection(e){directionsDisplay&&directionsDisplay.setMap(null);var t=new google.maps.DirectionsService;directionsDisplay=new google.maps.DirectionsRenderer;var n=selectTravelMode();directionsDisplay.setMap(map),t.route({origin:locateOrigin.position,destination:e,travelMode:google.maps.TravelMode[n]},function(e,t){"OK"===t?(directionsDisplay.setDirections(e),distanceFromOrigin=e.routes[0].legs[0].distance.value,"DRIVING"!==n&&"TRANSIT"!==n?(calculateCalories(n),n=n[0].toUpperCase()+n.slice(1).toLowerCase(),transportOutput.innerText=n):"DRIVING"===n?calculateFuelCost():"TRANSIT"===n&&(n=n[0].toUpperCase()+n.slice(1).toLowerCase(),costOutput.innerText=" NA ",caloriesOutput.innerText=" NA ",transportOutput.innerText=n),showDistance(distanceFromOrigin)):"NOT_FOUND"===t?sendError(t):"ZERO_RESULTS"===t&&sendError(t)})}function showDistance(e){var t=document.getElementById("distance-info");t.innerText="",t.innerText=(e/1e3).toFixed(1)}function selectTravelMode(){return document.getElementById("transport").value}function calculateFuelCost(){caloriesOutput.innerText=" NA ";for(var e=0;e<drivingOptions.length;e++)if(drivingOptions[e].vehicle===recommendedTransport){dailyCost=drivingOptions[e].costPerDay,litrePerHundred=drivingOptions[e].litrePerHundredKm;break}travelCost=fuelCost*litrePerHundred*(distanceFromOrigin/1e3/10),travelCost/=10,travelCost+=dailyCost*days,costOutput.innerText="",costOutput.innerText="$"+travelCost.toFixed(2)}function calculateCalories(e){var t=distanceFromOrigin/1e3;caloriesOutput.innerText="",costOutput.innerText=" NA ",caloriesOutput.innerText=(calories*t).toFixed(0)}function sendError(e){"NOT_FOUND"===e?alert("Sorry! There was an error!"):"ZERO_RESULTS"===e&&alert("Sorry! Your route returned no results.")}function validateInput(e,t,n,o){return 6===o?t=document.getElementById("people-errors"):15===o&&(t=document.getElementById("days-errors")),t.innerText="",e<n?(t.innerText="Must be greater than "+(n-1),!1):e>o?(t.innerText="Must be less than "+(o+1),!1):[!0,e]}function runCalculations(e,t){transportOutput.innerText="",recommendedTransport=1==e&&t<=5?drivingOptions[0].vehicle:e<3&&t<=10?drivingOptions[1].vehicle:e<=5&&t>=3&&t<=10?drivingOptions[2].vehicle:e>=2&&e<=6&&t>=2&&t<=15?drivingOptions[3].vehicle:"Not Applicable",transportOutput.innerText=recommendedTransport}var vid=document.getElementById("parallax-vid"),transportOutput=document.getElementById("transport-info"),costOutput=document.getElementById("cost-info"),caloriesOutput=document.getElementById("calories-info"),fuelCost=1.859,calories=32.5,map,userMarker,directionsDisplay,distanceFromOrigin,recommendedTransport,travelCost,dailyCost,days,litrePerHundred,popupBox,locateOrigin,drivingOptions=[{vehicle:"Motorbike",costPerDay:109,litrePerHundredKm:3.7},{vehicle:"Small Car",costPerDay:129,litrePerHundredKm:8.5},{vehicle:"Large Car",costPerDay:144,litrePerHundredKm:9.7},{vehicle:"Motor Home",costPerDay:129,litrePerHundredKm:17}];$(document).ready(function(){function e(e){var t=$("#menu-link"),n=$("#map-stage"),i=$("#menu-link")[0].classList[1];"fa-th-list"===i?(t.removeClass("fa-th-list"),t.addClass("fa-map-signs"),n.fadeOut(300)):"fa-map-signs"===i&&(t.addClass("fa-th-list"),t.removeClass("fa-map-signs"),n.fadeIn(300)),o.delay(e).fadeToggle(300)}var t,n,o=$("#input-form"),i=$(".up"),r=$(".down");vid.play(),$("#home-reload").click(function(){location.reload()}),$("#fade-intro").click(function(){$("#intro-container").fadeOut(300),$("#nav-container").delay(300).fadeIn(300),e(300)}),$("#start").click(function(){$("#splash").fadeOut(300),$("#video-container").fadeOut(300),$("#intro-container").fadeIn(300),initialiseIntro()}),$("#menu-link").click(function(){e(0)}),i.click(function(){var e=this.parentNode,t=this.parentNode,n=Number(e.childNodes[12].max);e=e.childNodes[12],(e=Number(e.value))!==n&&e<n&&(t.childNodes[12].value=e+1)}),r.click(function(){var e=this.parentNode,t=this.parentNode,n=Number(e.childNodes[12].min);e=e.childNodes[12],(e=Number(e.value))!==n&&e>n&&(t.childNodes[12].value=e-1)}),$("#submit").click(function(o){n=$("#people").val(),days=$("#days").val(),t=$("#transport").val(),o.preventDefault();var i=validateInput(n,void 0,1,6),r=validateInput(days,void 0,1,15);1==i[0]&&1==r[0]&&("DRIVING"===t?runCalculations(i[1],r[1]):"WALKING"!==t&&"BICYCLING"!==t||calculateCalories(t),$("#map").fadeIn(300),e())}),$("#close-prompt").click(function(){initialiseMap(),$("#prompt-route").fadeOut(300)}),$("#chevron-toggle").click(function(){var e=$("#chevron-toggle")[0].classList[1],t=$("#chevron-toggle");"fa-times"===e?(t.removeClass("fa-times"),t.addClass("fa-chevron-up"),t.css("color","#FFF")):"fa-chevron-up"===e&&(t.addClass("fa-times"),t.removeClass("fa-chevron-up")),$("#slider-info").slideToggle(300)})});